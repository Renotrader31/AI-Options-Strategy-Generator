<!DOCTYPE html>
<html>
<head>
    <title>Update FMP API Key</title>
    <link rel="icon" href="data:,">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { background: white; padding: 30px; border-radius: 8px; max-width: 800px; margin: 0 auto; }
        .key-input { width: 100%; padding: 10px; margin: 10px 0; border: 2px solid #ddd; border-radius: 4px; }
        .btn { padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .btn:hover { background: #0056b3; }
        .code { background: #f8f9fa; padding: 15px; border-radius: 4px; font-family: monospace; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 4px; margin: 10px 0; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 4px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë Configure Real-Time API Key</h1>
        
        <div class="info">
            <h3>üìä Current Issue:</h3>
            <p>Your app is showing <strong>yesterday's closing prices</strong> instead of <strong>current live prices</strong>.</p>
            <p>For example: NBIS shows $64 but should show $90 (current price).</p>
        </div>
        
        <h2>üéØ Solution: Add Your Paid FMP API Key</h2>
        <p>Enter your paid Financial Modeling Prep API key below to get real-time stock prices:</p>
        
        <input type="text" id="apiKey" class="key-input" placeholder="Enter your paid FMP API key (e.g., 1234567890abcdef...)" />
        <button class="btn" onclick="generateUpdatedCode()">üîß Generate Updated Code</button>
        
        <div id="result" style="display: none;">
            <div class="success">
                <h3>‚úÖ Updated Configuration Generated!</h3>
                <p>Copy the code below and replace the configuration in your index.html file:</p>
            </div>
            
            <h4>üîÑ Replace this section in your index.html:</h4>
            <div class="code">
const REAL_TIME_CONFIG = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;POLYGON_API_KEY: '75rlu6cWGNnIqqR_x8M384YUjBgGk6kT',<br>
&nbsp;&nbsp;&nbsp;&nbsp;FMP_API_KEY: 'YOUR_PAID_FMP_KEY_HERE',<br>
&nbsp;&nbsp;&nbsp;&nbsp;ALPHA_VANTAGE_KEY: 'demo'<br>
};
            </div>
            
            <h4>üéØ With this updated code:</h4>
            <div class="code" id="updatedCode"></div>
        </div>
        
        <div class="info">
            <h3>üìã Step-by-Step Instructions:</h3>
            <ol>
                <li><strong>Get your FMP API key:</strong> Login to <a href="https://financialmodelingprep.com/developer/docs" target="_blank">financialmodelingprep.com</a></li>
                <li><strong>Enter the key above</strong> and click "Generate Updated Code"</li>
                <li><strong>Copy the generated code</strong> and replace the configuration in your index.html</li>
                <li><strong>Test with NBIS:</strong> Should now show $90 instead of $64</li>
            </ol>
            
            <h4>üîç How to find the configuration in index.html:</h4>
            <p>Look for this line (around line 105-110):</p>
            <div class="code">const REAL_TIME_CONFIG = {</div>
            <p>Replace the entire REAL_TIME_CONFIG object with the generated code above.</p>
        </div>
        
        <h2>üß™ Alternative: Test Real-Time Data Now</h2>
        <p>Want to test if real-time data works? Try this ticker that should show current intraday price:</p>
        
        <button class="btn" onclick="testRealTimeData()">üîç Test Current NBIS Price</button>
        <div id="testResult"></div>
    </div>

    <script>
        function generateUpdatedCode() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey) {
                alert('Please enter your FMP API key');
                return;
            }
            
            const updatedCode = `const REAL_TIME_CONFIG = {<br>
&nbsp;&nbsp;&nbsp;&nbsp;POLYGON_API_KEY: '75rlu6cWGNnIqqR_x8M384YUjBgGk6kT',<br>
&nbsp;&nbsp;&nbsp;&nbsp;FMP_API_KEY: '<span style="background: yellow; padding: 2px;">${apiKey}</span>',<br>
&nbsp;&nbsp;&nbsp;&nbsp;ALPHA_VANTAGE_KEY: 'demo'<br>
};`;
            
            document.getElementById('updatedCode').innerHTML = updatedCode;
            document.getElementById('result').style.display = 'block';
            
            console.log('‚úÖ Generated updated configuration with API key:', apiKey);
        }
        
        async function testRealTimeData() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = '<p>üîÑ Testing real-time data for NBIS...</p>';
            
            try {
                // Test FMP API for current price
                const response = await fetch(
                    'https://financialmodelingprep.com/api/v3/quote/NBIS?apikey=m2XfxOS0sZxs6hLEY5yRzUgDyp5Dur4V'
                );
                
                if (response.ok) {
                    const data = await response.json();
                    if (data && data.length > 0) {
                        const quote = data[0];
                        resultDiv.innerHTML = `
                            <div style="background: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 4px;">
                                <h4>üìä NBIS Current Data:</h4>
                                <p><strong>Price:</strong> $${quote.price}</p>
                                <p><strong>Change:</strong> $${quote.change} (${quote.changesPercentage}%)</p>
                                <p><strong>Volume:</strong> ${quote.volume?.toLocaleString()}</p>
                                <p><strong>Last Updated:</strong> ${new Date().toLocaleString()}</p>
                                <p><em>Note: This might still be delayed without a paid API key</em></p>
                            </div>
                        `;
                    }
                } else {
                    throw new Error(`API error: ${response.status}`);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div style="background: #f8d7da; padding: 15px; margin: 10px 0; border-radius: 4px;">
                        <p>‚ùå Test failed: ${error.message}</p>
                        <p>This confirms you need a paid FMP API key for real-time data.</p>
                    </div>
                `;
            }
        }
        
        console.log('üîß API Key updater loaded');
    </script>
</body>
</html>